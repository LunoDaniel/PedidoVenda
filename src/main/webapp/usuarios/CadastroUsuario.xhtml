<ui:composition template="/WEB-INF/template/LayoutPadrao.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="jakarta.faces.core"
                xmlns:h="jakarta.faces.html"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="jakarta.faces.omnifaces">

    <f:metadata>
        <o:viewParam name="usuarioId"
                     value="#{cadastroUsuarioBean.usuarioId}" />
        <f:event type="preRenderView"
                 listener="#{cadastroUsuarioBean.inicializar}" />
    </f:metadata>

    <ui:define name="titulo">Novo Usuário</ui:define>

    <ui:define name="corpo">
        <h:form>

            <h1>Novo Usuário</h1>

            <p:messages autoUpdate="true" closable="true"/>

            <p:toolbar style="margin-top:20px;">
                <p:toolbarGroup>
                    <p:button value="Novo"
                              outcome="/usuarios/CadastroUsuario"/>
                    <p:commandButton value="Salvar"
                                     action="#{cadastroUsuarioBean.salvar}"/>
                </p:toolbarGroup>

                <p:toolbarGroup align="right">
                    <p:button value="Pesquisa"
                              outcome="/usuarios/PesquisaUsuario"/>
                </p:toolbarGroup>
            </p:toolbar>

            <p:panelGrid columns="2" style="margin-top:20px"
                         columnClasses="rotulo,campo">

                <p:outputLabel value="Nome" for="nome"/>
                <p:inputText id="nome"
                             value="#{cadastroUsuarioBean.usuario.nome}"
                             maxlength="80"/>

                <p:outputLabel value="Email" for="email"/>
                <p:inputText id="email"
                             value="#{cadastroUsuarioBean.usuario.email}"
                             maxlength="60"/>

                <p:outputLabel value="Grupos" for="grupo"/>
                <p:selectManyCheckbox id="grupo"
                                      value="#{cadastroUsuarioBean.usuario.grupos}"
                                      converter="grupoConverter">
                    <f:selectItems
                            value="#{cadastroUsuarioBean.grupos}"
                            var="grupo"
                            itemValue="#{grupo}"
                            itemLabel="#{grupo.descricao}"/>
                </p:selectManyCheckbox>

                <p:outputLabel value="Senha" for="senha"/>
                <p:password id="senha"
                            value="#{cadastroUsuarioBean.usuario.senha}"
                            required="true"
                            match="confirmarSenha"
                            validatorMessage="As senhas devem ser iguais."/>

                <p:outputLabel value="Confirmar Senha" for="confirmarSenha"/>
                <p:password id="confirmarSenha"
                            value="#{cadastroUsuarioBean.confirmarSenha}"
                            required="true"/>

            </p:panelGrid>

        </h:form>
    </ui:define>
</ui:composition>
